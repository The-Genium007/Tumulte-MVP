@import 'tailwindcss';
@import '@nuxt/ui';

/* ============================================================================
   TUMULTE - THEME CONFIGURATION
   ============================================================================

   Palettes de couleurs statiques en HEX pour compatibilitÃ© cross-browser.
   Compatible avec: Chrome, Firefox, Safari, Edge (toutes versions modernes)

   ============================================================================ */

@theme {
  /* ==========================================================================
     ðŸŽ¨ CONFIGURATION RAPIDE - Couleurs de base du thÃ¨me
     ========================================================================== */

  /* Couleur principale (brand/primary) */
  --theme-brand: #0f0b04;

  /* Couleur secondaire */
  --theme-secondary: #d8b790;

  /* Couleur de fond de page */
  --theme-bg-page: #f2e4d4;

  /* Couleurs sÃ©mantiques */
  --theme-success: #4ade80; /* Vert */
  --theme-error: #dc2626; /* Rouge */
  --theme-warning: #f59e0b; /* Ambre */
  --theme-info: #3b82f6; /* Bleu */
  --theme-neutral: #737373; /* Gris */

  /* Polices */
  --font-sans: 'Inter', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji';
  --font-heading: 'Aoboshi One', serif;
  --font-mono: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;

  /* ==========================================================================
     PALETTES DE COULEURS - Valeurs HEX statiques
     ========================================================================== */

  /* Brand / Primary - Palette marron foncÃ© */
  --color-brand-50: #f5f3f0;
  --color-brand-100: #e8e4dd;
  --color-brand-200: #d4cdc2;
  --color-brand-300: #b5aa99;
  --color-brand-400: #8a7d6a;
  --color-brand-500: #0f0b04;
  --color-brand-600: #0d0a03;
  --color-brand-700: #0b0802;
  --color-brand-800: #080602;
  --color-brand-900: #060502;
  --color-brand-950: #040301;

  /* Alias primary â†’ brand */
  --color-primary-50: var(--color-brand-50);
  --color-primary-100: var(--color-brand-100);
  --color-primary-200: var(--color-brand-200);
  --color-primary-300: var(--color-brand-300);
  --color-primary-400: var(--color-brand-400);
  --color-primary-500: var(--color-brand-500);
  --color-primary-600: var(--color-brand-600);
  --color-primary-700: var(--color-brand-700);
  --color-primary-800: var(--color-brand-800);
  --color-primary-900: var(--color-brand-900);
  --color-primary-950: var(--color-brand-950);

  /* Secondary - Palette beige/dorÃ© */
  --color-secondary-50: #faf8f5;
  --color-secondary-100: #f2ebe0;
  --color-secondary-200: #e8dcc8;
  --color-secondary-300: #d8c4a6;
  --color-secondary-400: #c9a97e;
  --color-secondary-500: #d8b790;
  --color-secondary-600: #c2a582;
  --color-secondary-700: #ad9374;
  --color-secondary-800: #988166;
  --color-secondary-900: #836f58;
  --color-secondary-950: #6e5d4a;

  /* Neutral - Palette grise */
  --color-neutral-50: #fafafa;
  --color-neutral-100: #f5f5f5;
  --color-neutral-200: #e5e5e5;
  --color-neutral-300: #d4d4d4;
  --color-neutral-400: #a3a3a3;
  --color-neutral-500: #737373;
  --color-neutral-600: #525252;
  --color-neutral-700: #404040;
  --color-neutral-800: #262626;
  --color-neutral-900: #171717;
  --color-neutral-950: #0a0a0a;

  /* Success - Palette verte */
  --color-success-50: #f0fdf4;
  --color-success-100: #dcfce7;
  --color-success-200: #bbf7d0;
  --color-success-300: #86efac;
  --color-success-400: #4ade80;
  --color-success-500: #22c55e;
  --color-success-600: #16a34a;
  --color-success-700: #15803d;
  --color-success-800: #166534;
  --color-success-900: #14532d;
  --color-success-950: #052e16;

  /* Error - Palette rouge */
  --color-error-50: #fef2f2;
  --color-error-100: #fee2e2;
  --color-error-200: #fecaca;
  --color-error-300: #fca5a5;
  --color-error-400: #f87171;
  --color-error-500: #ef4444;
  --color-error-600: #dc2626;
  --color-error-700: #b91c1c;
  --color-error-800: #991b1b;
  --color-error-900: #7f1d1d;
  --color-error-950: #450a0a;

  /* Warning - Palette ambre */
  --color-warning-50: #fffbeb;
  --color-warning-100: #fef3c7;
  --color-warning-200: #fde68a;
  --color-warning-300: #fcd34d;
  --color-warning-400: #fbbf24;
  --color-warning-500: #f59e0b;
  --color-warning-600: #d97706;
  --color-warning-700: #b45309;
  --color-warning-800: #92400e;
  --color-warning-900: #78350f;
  --color-warning-950: #451a03;

  /* Info - Palette bleue */
  --color-info-50: #eff6ff;
  --color-info-100: #dbeafe;
  --color-info-200: #bfdbfe;
  --color-info-300: #93c5fd;
  --color-info-400: #60a5fa;
  --color-info-500: #3b82f6;
  --color-info-600: #2563eb;
  --color-info-700: #1d4ed8;
  --color-info-800: #1e40af;
  --color-info-900: #1e3a8a;
  --color-info-950: #172554;

  /* Live (utilise error) */
  --color-live: #dc2626;

  /* ==========================================================================
     INTERFACE - BACKGROUNDS
     ========================================================================== */
  --color-bg-page: var(--theme-bg-page);
  --color-bg-subtle: var(--theme-bg-page);
  --color-bg-muted: #ffffff;
  --color-bg-elevated: #ffffff;
  --color-bg-inverse: #0f172a;
  --color-bg-brand-light: #f5f3ff;
  --color-bg-primary-light: #f5f3ff;
  --color-bg-success-light: #f0fdf4;
  --color-bg-error-light: #fef2f2;
  --color-bg-warning-light: #fffbeb;
  --color-bg-info-light: #eff6ff;

  /* ==========================================================================
     INTERFACE - TEXTES
     ========================================================================== */
  --color-text-primary: #0e0d04;
  --color-text-secondary: #475569;
  --color-text-muted: #64748b;
  --color-text-disabled: #94a3b8;
  --color-text-inverse: #ffffff;

  /* ==========================================================================
     DARK UI (Studio / Overlay Editor)
     Teintes marron/beige sombres cohÃ©rentes avec le thÃ¨me principal
     ========================================================================== */
  --color-dark-bg-base: #0f0d0a;
  --color-dark-bg-surface: #1a1714;
  --color-dark-bg-elevated: #2a2520;
  --color-dark-bg-hover: #3a332c;
  --color-dark-bg-deepest: #0a0908;
  --color-dark-border: #2a2520;
  --color-dark-text-primary: #f5f3f0;
  --color-dark-text-secondary: #d8cfc4;
  --color-dark-text-muted: #a89888;
  --color-dark-text-subtle: #786858;

  /* ==========================================================================
     OVERLAY / POLL CARD
     Accents marron/dorÃ© cohÃ©rents avec le thÃ¨me principal
     ========================================================================== */
  --color-overlay-bg-dark: rgba(15, 13, 10, 0.95);
  --color-overlay-bg-dark-alt: rgba(26, 23, 20, 0.9);
  --color-overlay-shadow-brand: rgba(216, 183, 144, 0.4);
  --color-overlay-shadow-brand-soft: rgba(216, 183, 144, 0.2);
  --color-overlay-border-brand: rgba(216, 183, 144, 0.3);
  --color-overlay-border-brand-soft: rgba(216, 183, 144, 0.15);
  --color-overlay-highlight: rgba(255, 248, 240, 0.1);
  --color-overlay-highlight-strong: rgba(255, 248, 240, 0.2);
  --color-overlay-highlight-soft: rgba(255, 248, 240, 0.3);
  --color-overlay-text-light: #f5efe8;
  --color-overlay-backdrop: rgba(15, 13, 10, 0.5);

  /* ==========================================================================
     GIZMO / TRANSFORM HANDLES
     Accents dorÃ©s pour la sÃ©lection
     ========================================================================== */
  --color-gizmo-border: #d8b790;
  --color-gizmo-handle: #e8c9a0;
  --color-gizmo-handle-glow: #d8b790;

  /* ==========================================================================
     GRADIENT BRAND
     DÃ©gradÃ© marron/dorÃ© cohÃ©rent avec le thÃ¨me
     ========================================================================== */
  --color-gradient-brand-start: #8a7d6a;
  --color-gradient-brand-middle: #b5aa99;
  --color-gradient-brand-end: #d8b790;
}

/* ============================================================================
   THÃˆME CLAIR PERMANENT
   ============================================================================ */

:root {
  color-scheme: light;
}

html.dark {
  color-scheme: light;
}

.dark {
  --ui-text-dimmed: var(--ui-color-neutral-400);
  --ui-text-muted: var(--ui-color-neutral-500);
  --ui-text-toned: var(--ui-color-neutral-600);
  --ui-text: var(--ui-color-neutral-700);
  --ui-text-highlighted: var(--ui-color-neutral-900);
  --ui-text-inverted: var(--color-white);
  --ui-bg: var(--color-white);
  --ui-bg-muted: var(--ui-color-neutral-50);
  --ui-bg-elevated: var(--ui-color-neutral-100);
  --ui-bg-accented: var(--ui-color-neutral-200);
  --ui-bg-inverted: var(--ui-color-neutral-900);
  --ui-border: var(--ui-color-neutral-200);
  --ui-border-muted: var(--ui-color-neutral-200);
  --ui-border-accented: var(--ui-color-neutral-300);
  --ui-border-inverted: var(--ui-color-neutral-900);
}

/* ============================================================================
   CURSEUR POINTER POUR Ã‰LÃ‰MENTS INTERACTIFS
   ============================================================================ */

button,
[type='button'],
[type='submit'],
[type='reset'],
[role='button'],
a[href],
label[for],
select,
summary,
[tabindex]:not([tabindex='-1']),
.cursor-pointer {
  cursor: pointer;
}

/* ============================================================================
   STYLES DE BASE
   ============================================================================ */

html {
  background-color: var(--color-bg-page);
}

body {
  font-family: var(--font-sans);
  color: var(--color-text-primary);
  background-color: var(--color-bg-page);
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-heading);
  text-transform: uppercase;
}

/* ============================================================================
   CLASSES UTILITAIRES
   ============================================================================ */

/* Backgrounds */
.bg-page {
  background-color: var(--color-bg-page);
}
.bg-subtle {
  background-color: var(--color-bg-subtle);
}
.bg-muted {
  background-color: var(--color-bg-muted);
}
.bg-elevated {
  background-color: var(--color-bg-elevated);
}
.bg-inverse {
  background-color: var(--color-bg-inverse);
}
.bg-brand-light {
  background-color: var(--color-bg-brand-light);
}
.bg-primary-light {
  background-color: var(--color-bg-primary-light);
}
.bg-success-light {
  background-color: var(--color-bg-success-light);
}
.bg-error-light {
  background-color: var(--color-bg-error-light);
}
.bg-warning-light {
  background-color: var(--color-bg-warning-light);
}
.bg-info-light {
  background-color: var(--color-bg-info-light);
}
.bg-live {
  background-color: var(--color-live);
}
.bg-disabled {
  background-color: var(--color-neutral-100);
}

/* Textes */
.text-primary {
  color: var(--color-text-primary);
}
.text-secondary {
  color: var(--color-text-secondary);
}
.text-muted {
  color: var(--color-text-muted);
}
.text-disabled {
  color: var(--color-text-disabled);
}
.text-inverse {
  color: var(--color-text-inverse);
}

/* Dark UI (Studio) */
.dark-bg-base {
  background-color: var(--color-dark-bg-base);
}
.dark-bg-surface {
  background-color: var(--color-dark-bg-surface);
}
.dark-bg-elevated {
  background-color: var(--color-dark-bg-elevated);
}
.dark-bg-hover {
  background-color: var(--color-dark-bg-hover);
}
.dark-bg-deepest {
  background-color: var(--color-dark-bg-deepest);
}
.dark-border {
  border-color: var(--color-dark-border);
}
.dark-text-primary {
  color: var(--color-dark-text-primary);
}
.dark-text-secondary {
  color: var(--color-dark-text-secondary);
}
.dark-text-muted {
  color: var(--color-dark-text-muted);
}
.dark-text-subtle {
  color: var(--color-dark-text-subtle);
}

/* ============================================================================
   SUPPRESSION GLOBALE DES BORDURES NUXT UI
   ============================================================================ */

[class*='ring-'] {
  --tw-ring-offset-width: 0px !important;
  --tw-ring-width: 0px !important;
  --tw-ring-color: transparent !important;
  box-shadow: none !important;
}

/* ============================================================================
   MASQUER LES MODALS DES GESTIONNAIRES DE MOTS DE PASSE
   ============================================================================ */

[id^='1password'],
[id^='lastpass'],
[id^='bitwarden'],
[class*='onepassword'],
[class*='lastpass'],
[class*='bitwarden'],
[data-lastpass-root],
[data-1p-root] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* ============================================================================
   PWA & MOBILE SUPPORT
   ============================================================================ */

/* Safe areas pour PWA - Support des encoches et barres systÃ¨me */
.safe-area-top {
  padding-top: env(safe-area-inset-top);
}
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}
.safe-area-left {
  padding-left: env(safe-area-inset-left);
}
.safe-area-right {
  padding-right: env(safe-area-inset-right);
}

/* Hauteur viewport mobile - Utilise dvh pour gÃ©rer les barres d'adresse mobiles */
.min-h-screen-mobile {
  min-height: 100dvh;
}

/* Touch targets minimum 44px - Recommandation WCAG pour accessibilitÃ© tactile */
.touch-target {
  min-height: 44px;
  min-width: 44px;
}

/* ============================================================================
   SCROLLBAR PERSONNALISÃ‰E
   ============================================================================ */

/* Webkit (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-neutral-100);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--color-primary-300);
  border-radius: 4px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-primary-400);
}

::-webkit-scrollbar-thumb:active {
  background: var(--color-primary-400);
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-primary-300) var(--color-neutral-100);
}

/* ============================================================================
   INPUT RANGE / SLIDER
   ============================================================================ */

input[type='range'] {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 6px;
  background: var(--color-neutral-200);
  border-radius: 3px;
  outline: none;
  cursor: pointer;
}

/* Track - Webkit (Chrome, Safari, Edge) */
input[type='range']::-webkit-slider-runnable-track {
  height: 6px;
  background: var(--color-neutral-200);
  border-radius: 3px;
}

/* Thumb - Webkit */
input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: var(--color-primary-400);
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  margin-top: -5px;
  transition:
    transform 0.15s ease,
    box-shadow 0.15s ease;
}

input[type='range']::-webkit-slider-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
}

input[type='range']::-webkit-slider-thumb:active {
  transform: scale(0.95);
}

/* Track - Firefox */
input[type='range']::-moz-range-track {
  height: 6px;
  background: var(--color-neutral-200);
  border-radius: 3px;
  border: none;
}

/* Thumb - Firefox */
input[type='range']::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: var(--color-primary-400);
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  transition:
    transform 0.15s ease,
    box-shadow 0.15s ease;
}

input[type='range']::-moz-range-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
}

input[type='range']::-moz-range-thumb:active {
  transform: scale(0.95);
}

/* Focus state */
input[type='range']:focus {
  outline: none;
}

input[type='range']:focus::-webkit-slider-thumb {
  box-shadow:
    0 0 0 3px var(--color-primary-200),
    0 1px 3px rgba(0, 0, 0, 0.2);
}

input[type='range']:focus::-moz-range-thumb {
  box-shadow:
    0 0 0 3px var(--color-primary-200),
    0 1px 3px rgba(0, 0, 0, 0.2);
}

/* ============================================================================
   INPUT NUMBER / SPIN BUTTON
   ============================================================================ */

input[type='number'] {
  -moz-appearance: textfield;
  appearance: textfield;
}

/* Webkit - Always show spin buttons */
input[type='number']::-webkit-inner-spin-button,
input[type='number']::-webkit-outer-spin-button {
  -webkit-appearance: none;
  appearance: none;
  opacity: 1;
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 20px;
  background: var(--color-neutral-200);
  border-left: 1px solid var(--color-neutral-300);
  border-radius: 0 6px 6px 0;
  cursor: pointer;
}

/* Custom spin buttons using pseudo-elements on wrapper */
.number-input-wrapper {
  position: relative;
  display: inline-flex;
  align-items: center;
}

.number-input-wrapper input[type='number'] {
  padding-right: 24px;
}

.number-input-wrapper .spin-buttons {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  width: 20px;
  border-left: 1px solid var(--color-neutral-200);
  border-radius: 0 6px 6px 0;
  overflow: hidden;
}

.number-input-wrapper .spin-button {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-neutral-100);
  border: none;
  cursor: pointer;
  color: var(--color-neutral-400);
  font-size: 10px;
  line-height: 1;
  padding: 0;
  transition: all 0.15s ease;
}

.number-input-wrapper .spin-button:hover {
  background: var(--color-neutral-200);
  color: var(--color-primary-500);
}

.number-input-wrapper .spin-button:active {
  background: var(--color-primary-100);
  color: var(--color-primary-600);
}

.number-input-wrapper .spin-button-up {
  border-bottom: 1px solid var(--color-neutral-200);
}

/* ============================================================================
   ANIMATION D20 LOADING
   ============================================================================ */

.animate-spin-slow {
  animation: spin-slow 4.5s linear infinite;
}

@keyframes spin-slow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* ============================================================================
   OVERLAY STUDIO - Z-INDEX HIERARCHY
   Le composant Html de TresJS crÃ©e un conteneur avec position absolute.
   On doit s'assurer que le gizmo de transformation est au-dessus.
   ============================================================================ */

/* Conteneur Html de TresJS - z-index bas pour Ãªtre sous le gizmo */
.canvas-wrapper > div[style*='position: absolute'] {
  z-index: 1 !important;
}

/* Gizmo de transformation - toujours au-dessus */
.transform-gizmo {
  z-index: 1000 !important;
}
